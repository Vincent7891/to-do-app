(()=>{"use strict";class e{static nextID=0;constructor(t,n){this.title=t,this.id=e.nextID,e.nextID++,this.toDoStorage=[]}addTaskToProject(e){this.toDoStorage.push(e)}}class t{static nextID=0;constructor(e,n,d,i,o,c){this.title=e,this.description=n,this.dueDate=d,this.priority=i,this.completion=o,this.id=t.nextID,t.nextID++}}const n=new class{constructor(){this.projectStore=[]}addProject(e){this.projectStore.push(e)}get length(){return this.projectStore.length}};function d(e,t,n){const d=document.createElement("img");return d.src=e,d.id=t,d.className=n,d}function i(e,t,n){const d=e.projectStore.find((e=>e.id===t)).toDoStorage.find((e=>e.id===n));d.completion=!d.completion}function o(e,t,n,d,i){e.projectStore.find((e=>e.id===t)).toDoStorage.find((e=>e.id===n))[d]=i}document.getElementById("project-form").addEventListener("submit",(c=>{c.preventDefault();const s=(a=document.getElementById("project-name-dialogue").value,new e(a));var a;n.addProject(s),function(e){(function(e){const c=document.getElementById("project-display"),s=document.createElement("div");s.id=`user-project-${e.id}`,c.appendChild(s);const a=document.createElement("div");a.id=`left-container-projects-${e.id}`;const r=d("images/favourite.svg",`favourite-project-${e.id}`,"icons");a.appendChild(r);const l=document.createElement("p");l.textContent=e.title,s.appendChild(a),a.appendChild(l);const m=document.createElement("div");m.id=`right-container-projects-${e.id}`;const u=d("images/remove.svg",`remove-project-${e.id}`,"icons"),p=d("images/edit.svg",`edit-project-${e.id}`,"icons"),g=d("images/add.svg",`add-project-${e.id}`,"icons");m.appendChild(g),m.appendChild(u),m.appendChild(p),s.appendChild(m);const v=document.getElementById("add-task-dialog"),E=document.getElementById("close-task-dialog-button");u.addEventListener("click",(()=>{!function(e){const t=n.projectStore.findIndex((t=>t.id===e));n.projectStore.splice(t,1)}(e),function(e){let t=document.getElementById(`project-container-${e.id}`);t?t.remove():document.getElementById(`user-project-${e.id}`).remove()}(e),function(e){document.getElementById(`sidebar-project-${e.id}`).remove()}(e)})),g.addEventListener("click",(()=>{v.showModal();const c=s=>{s.preventDefault();const a=function(e){const n=document.getElementById("add-task-title").value,d=document.getElementById("add-task-description").value,i=document.getElementById("add-task-due-date").value,o=document.getElementById("add-task-priority").value,c=new t(n,d,i,o,"false");return e.addTaskToProject(c),c}(e);!function(e,t){const c=document.getElementById("project-display");let s=document.getElementById(`project-container-${e.id}`);const a=document.createElement("div");a.id=`left-container-tasks-${t.id}`;const r=document.createElement("div");r.id=`right-container-tasks-${t.id}`;const l=d("images/tick.svg",`remove-project-${t.id}`,"icons");a.append(l);const m=document.createElement("p");m.textContent=t.title,a.appendChild(m);const u=d("images/remove.svg",`remove-task-${t.id}`,"icons"),p=d("images/edit.svg",`edit-task-${t.id}`,"icons");r.appendChild(u),r.appendChild(p);const g=document.createElement("span");g.classList.add("due-date"),g.textContent=`Due: ${t.dueDate}`,a.appendChild(g);const v=document.createElement("span");v.classList.add("priority"),v.textContent=`Priority: ${t.priority}`,a.appendChild(v);const E=document.createElement("span");E.classList.add("description-snippet");const y=t.description.split(" ").slice(0,2).join(" ")+"...";if(E.textContent=`Description: ${y}`,a.appendChild(E),s){const e=document.createElement("div");e.id=`task-container-${t.id}`,e.appendChild(a),e.appendChild(r),s.appendChild(e)}else{const n=document.createElement("div");n.id=`project-container-${e.id}`;const d=document.getElementById(`user-project-${e.id}`);c.insertBefore(n,d),n.appendChild(d);const i=document.createElement("div");i.id=`task-container-${t.id}`,i.appendChild(a),i.appendChild(r),n.appendChild(i)}u.addEventListener("click",(()=>{!function(e){document.getElementById(`task-container-${e.id}`).remove()}(t),function(e,t){const n=e.toDoStorage.findIndex((e=>e.id===t.id));-1!==n&&e.toDoStorage.splice(n,1)}(e,t)})),p.addEventListener("click",(()=>{!function(e,t){const c=document.getElementById("edit-task-dialog"),s=document.getElementById("close-edit-task-dialog-button");document.getElementById("submit-edit-task-button"),document.getElementById("edit-task-title").value=t.title,document.getElementById("edit-task-description").value=t.description,document.getElementById("edit-task-due-date").value=t.dueDate,document.getElementById("edit-task-priority").value=t.priority,c.showModal();const a=s=>{s.preventDefault(),t.title=document.getElementById("edit-task-title").value,t.description=document.getElementById("edit-task-description").value,t.dueDate=document.getElementById("edit-task-due-date").value,t.priority=document.getElementById("edit-task-priority").value;const r=document.getElementById(`left-container-tasks-${t.id}`);r.innerHTML="";const l=d("images/tick.svg",`remove-project-${t.id}`,"icons");r.append(l),l.addEventListener("click",(()=>{m.classList.toggle("crossed-out"),l.src.endsWith("images/tick.svg")?l.src="images/tick_green.svg":l.src="images/tick.svg",i(n,e.id,t.id)}));const m=document.createElement("p");m.textContent=t.title,r.appendChild(m);const u=document.createElement("span");u.classList.add("due-date"),u.textContent=`Due: ${t.dueDate}`,r.appendChild(u);const p=document.createElement("span");p.classList.add("priority"),p.textContent=`Priority: ${t.priority}`,r.appendChild(p);const g=document.createElement("span");g.classList.add("description-snippet");const v=t.description.split(" ").slice(0,2).join(" ")+"...";g.textContent=`Description: ${v}`,r.appendChild(g),o(n,e.id,t.id,"title",document.getElementById("edit-task-title").value),o(n,e.id,t.id,"description",document.getElementById("edit-task-description").value),o(n,e.id,t.id,"dueDate",document.getElementById("edit-task-due-date").value),o(n,e.id,t.id,"priority",document.getElementById("edit-task-priority").value),c.close(),c.removeEventListener("submit",a)};c.addEventListener("submit",a),s.addEventListener("click",(()=>{c.close(),c.removeEventListener("submit",a)}))}(e,t)})),l.addEventListener("click",(()=>{m.classList.toggle("crossed-out"),l.src.endsWith("images/tick.svg")?l.src="images/tick_green.svg":l.src="images/tick.svg",i(n,e.id,t.id)}))}(e,a),v.close(),v.removeEventListener("submit",c)};v.addEventListener("submit",c),E.addEventListener("click",(()=>{v.removeEventListener("submit",c)}))}))})(e),function(e){const t=document.createElement("div");t.id=`sidebar-project-${e.id}`,t.textContent=e.title,document.getElementById("projects-bar").appendChild(t)}(e)}(s),function(){const e=document.getElementById("add-task-dialog"),t=document.getElementById("close-task-dialog-button"),n=document.getElementById("submit-task-button");e.addEventListener("submit",(t=>{t.preventDefault(),e.close()})),t.addEventListener("click",(()=>{e.close()})),n.addEventListener("click",(()=>{e.close()}))}()})),function(){const e=document.getElementById("add-project-button"),t=document.getElementById("dialog"),n=document.getElementById("close-dialog-button"),d=document.getElementById("submit-project-button");e.addEventListener("click",(()=>{t.showModal()})),n.addEventListener("click",(()=>{t.close()})),d.addEventListener("click",(()=>{t.close()}))}()})();